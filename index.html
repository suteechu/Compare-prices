<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เปรียบเทียบห้องน้ำตามฟังก์ชัน (S, S1, S2, T, U)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'IBM Plex Sans Thai', sans-serif;
            background-color: #f8fafc;
        }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }

        /* Blueprint Pattern */
        .bg-blueprint {
            background-color: #2c3e50;
            background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="min-h-screen text-gray-800 p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div class="text-left w-full md:w-auto">
                <h1 class="text-2xl md:text-3xl font-bold text-slate-800 mb-1 flex items-center gap-2">
                    <span class="text-indigo-600">Model</span> Comparison
                </h1>
                <p class="text-slate-500 text-sm">เปรียบเทียบฟังก์ชันห้องน้ำตามรหัส (S, S1, S2, T, U)</p>
            </div>
            
            <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto items-end">
                <!-- Series Selector -->
                <div class="relative w-full md:w-64">
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1">Select Size Series (เลือกขนาด)</label>
                    <select id="series-selector" onchange="changeSeries()" class="block w-full rounded-xl border-0 py-2.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm shadow-sm font-semibold cursor-pointer hover:bg-gray-50 transition-colors">
                        <!-- Options injected via JS -->
                    </select>
                </div>
                <!-- View Toggle -->
                <div class="bg-white/80 p-1 rounded-xl border border-slate-200 shadow-sm flex relative w-full md:w-auto">
                    <button onclick="switchView('detail')" id="btn-detail" class="flex-1 md:flex-none px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2 text-indigo-700 bg-indigo-50 shadow-sm">Detail</button>
                    <button onclick="switchView('dashboard')" id="btn-dashboard" class="flex-1 md:flex-none px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2 text-gray-500 hover:text-gray-700">Analytics</button>
                </div>
            </div>
        </header>

        <!-- Main Navigation (Types S, S1, S2, T, U) -->
        <div id="nav-wrapper" class="sticky top-0 z-30 bg-[#f8fafc]/90 backdrop-blur-md py-2 mb-6 -mx-4 px-4 md:static md:bg-transparent md:p-0 md:m-0 transition-all duration-300">
            <div id="nav-container" class="flex md:grid md:grid-cols-5 gap-3 overflow-x-auto hide-scrollbar pb-2 md:pb-0 snap-x">
                <!-- Nav Items injected here -->
            </div>
        </div>

        <!-- Main Content -->
        <div class="grid lg:grid-cols-12 gap-6 items-start">
            <div id="main-content-col" class="lg:col-span-8 xl:col-span-9 transition-all">
                
                <!-- Inner Tabs -->
                <div id="inner-tabs" class="flex gap-2 mb-4 overflow-x-auto pb-1 hide-scrollbar">
                    <button onclick="setTab('specs')" id="tab-specs" class="px-4 py-2 rounded-full text-sm font-bold bg-indigo-600 text-white shadow-md transition-all flex items-center gap-2 whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"></path></svg>
                        ข้อมูลสเปค
                    </button>
                    <button onclick="setTab('plan')" id="tab-plan" class="px-4 py-2 rounded-full text-sm font-bold bg-white text-gray-600 hover:bg-gray-100 transition-all flex items-center gap-2 whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
                        แปลนพื้น (Plan)
                    </button>
                    <button onclick="setTab('3d')" id="tab-3d" class="px-4 py-2 rounded-full text-sm font-bold bg-white text-gray-600 hover:bg-gray-100 transition-all flex items-center gap-2 whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3l7 6-7 6-7-6 7-6zm0 14l7-6v6l-7 6-7-6v-6l7 6z"></path></svg>
                        3D จำลอง
                    </button>
                </div>

                <div id="content-area" class="min-h-[600px] rounded-3xl transition-all duration-500 relative overflow-hidden">
                    <!-- Content injected via JS -->
                </div>
            </div>

            <!-- Sidebar -->
            <div id="sidebar-col" class="lg:col-span-4 xl:col-span-3 space-y-4 sticky top-24 transition-all">
                
                <!-- Model Info Box -->
                <div class="bg-indigo-900 rounded-2xl shadow-lg border border-indigo-800 p-5 text-white relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-indigo-800 rounded-bl-full opacity-50 -mr-4 -mt-4 transition-transform group-hover:scale-110"></div>
                    <h3 class="font-bold text-indigo-200 mb-1 text-xs uppercase tracking-wider">Current Selection</h3>
                    <div class="text-3xl font-bold mb-1 flex items-baseline gap-2">
                        <span id="sidebar-model-code">1822S</span>
                    </div>
                    <div class="text-sm text-indigo-100 mb-4 flex items-center gap-2">
                         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path></svg>
                        <span id="sidebar-model-size">1.8 x 2.2 m</span>
                    </div>
                    <div class="grid grid-cols-2 gap-2 text-xs border-t border-indigo-700/50 pt-3">
                         <div><span class="block text-indigo-400">Function</span><span class="font-semibold" id="sidebar-function">Shower</span></div>
                         <div><span class="block text-indigo-400">Layout</span><span class="font-semibold" id="sidebar-desc">Standard</span></div>
                    </div>
                </div>

                <!-- Variant List -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-5">
                    <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2 pb-2 border-b border-slate-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><list></list><path d="M3 6h18"/><path d="M3 12h18"/><path d="M3 18h18"/></svg>
                        เปรียบเทียบรหัส (Variants)
                    </h3>
                    <div id="sidebar-list" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        
        // Base Series (Sizes)
        const seriesCatalog = [
            { id: "1822", w: 1.8, l: 2.2, label: "Series 1822 (1.8x2.2m)" },
            { id: "1827", w: 1.8, l: 2.7, label: "Series 1827 (1.8x2.7m)" },
            { id: "2222", w: 2.2, l: 2.2, label: "Series 2222 (2.2x2.2m)" },
            { id: "2227", w: 2.2, l: 2.7, label: "Series 2227 (2.2x2.7m)" },
            { id: "2231", w: 2.2, l: 3.1, label: "Series 2231 (2.2x3.1m)" },
            { id: "2236", w: 2.2, l: 3.6, label: "Series 2236 (2.2x3.6m)" },
            { id: "2245", w: 2.2, l: 4.5, label: "Series 2245 (2.2x4.5m)" }
        ];

        // Variants (S, S1, S2, T, U) - Replacing "Styles"
        const variants = [
            {
                id: "S", name: "Type S", thaiName: "S (Standard)", slogan: "ห้องน้ำมาตรฐาน (Wet+Dry)",
                basePricePerSqm: 8500, // Standard price
                specs: { floor: "กระเบื้อง 12x12 PM", wall: "กระเบื้อง 12x12 + Mosaic", sanitary: "Standard Set", features: "Shower Zone" },
                pros: ["มีโซนอาบน้ำครบครัน", "Layout มาตรฐาน ใช้งานง่าย"], cons: ["ขนาดตามมาตรฐาน"],
                bgGradient: "bg-gradient-to-br from-blue-50 to-blue-100", barColor: "bg-blue-500", badge: "Standard",
                type: "Shower"
            },
            {
                id: "S1", name: "Type S1", thaiName: "S1 (Layout 1)", slogan: "จัดวางแบบทางเลือก 1",
                basePricePerSqm: 8800, // Slightly more for custom layout
                specs: { floor: "กระเบื้อง 12x12 PM", wall: "กระเบื้อง 8x10", sanitary: "Adjusted Set", features: "Shower Zone (Alt)" },
                pros: ["ปรับตำแหน่งสุขภัณฑ์", "เหมาะกับทิศทางประตูเฉพาะ"], cons: ["ราคาอาจสูงกว่า S เล็กน้อย"],
                bgGradient: "bg-gradient-to-br from-cyan-50 to-cyan-100", barColor: "bg-cyan-500", badge: "Alt Layout",
                type: "Shower"
            },
            {
                id: "S2", name: "Type S2", thaiName: "S2 (Layout 2)", slogan: "จัดวางแบบทางเลือก 2",
                basePricePerSqm: 9000,
                specs: { floor: "Granito / Tile", wall: "Full Height Tile", sanitary: "Special Set", features: "Shower Zone (Alt 2)" },
                pros: ["การจัดวางพิเศษ", "รองรับเคาน์เตอร์กว้าง"], cons: ["ต้องเช็คระยะท่อ"],
                bgGradient: "bg-gradient-to-br from-indigo-50 to-indigo-100", barColor: "bg-indigo-500", badge: "Special",
                type: "Shower"
            },
            {
                id: "T", name: "Type T", thaiName: "T (Toilet)", slogan: "ห้องส้วม (ไม่มีอาบน้ำ)",
                basePricePerSqm: 6500, // Cheaper
                specs: { floor: "กระเบื้อง 12x12", wall: "ทาสี / กระเบื้องบางส่วน", sanitary: "Toilet + Basin", features: "No Shower" },
                pros: ["ประหยัดงบที่สุด", "เหมาะสำหรับรับแขก"], cons: ["อาบน้ำไม่ได้"],
                bgGradient: "bg-gradient-to-br from-amber-50 to-orange-100", barColor: "bg-amber-500", badge: "Toilet Only",
                type: "Toilet"
            },
            {
                id: "U", name: "Type U", thaiName: "U (Urinal)", slogan: "ห้องน้ำชาย / แห้ง",
                basePricePerSqm: 7500,
                specs: { floor: "กระเบื้อง 12x12", wall: "Wallpaper / Tile", sanitary: "Urinal + Toilet", features: "Dry Function" },
                pros: ["เพิ่มโถปัสสาวะชาย", "แยกโซนชัดเจน"], cons: ["เน้นการใช้งานเฉพาะ"],
                bgGradient: "bg-gradient-to-br from-emerald-50 to-teal-100", barColor: "bg-emerald-500", badge: "Urinal/Dry",
                type: "Dry"
            }
        ];

        // State
        let selectedSeriesId = "1822";
        let selectedVariantIndex = 0; // Default to S (Index 0)
        let viewMode = 'detail';
        let activeTab = 'specs';

        // Icons map
        const icons = {
            check: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stroke-[3]"><polyline points="20 6 9 17 4 12"></polyline></svg>`,
            x: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stroke-[3]"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`,
            star: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>`,
            dollar: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>`,
            hammer: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>`
        };

        function init() {
            const select = document.getElementById('series-selector');
            select.innerHTML = seriesCatalog.map(s => `<option value="${s.id}" ${s.id === selectedSeriesId ? 'selected' : ''}>${s.label}</option>`).join('');
            render();
            updateSidebar();
        }

        function changeSeries() {
            selectedSeriesId = document.getElementById('series-selector').value;
            render();
            updateSidebar();
        }

        function setVariant(index) {
            selectedVariantIndex = index;
            render();
            updateSidebar();
        }

        function setTab(tab) {
            activeTab = tab;
            render();
        }

        function switchView(mode) {
            viewMode = mode;
            render();
        }

        function updateSidebar() {
            const series = seriesCatalog.find(s => s.id === selectedSeriesId);
            const variant = variants[selectedVariantIndex];
            const fullCode = `${series.id}${variant.id}`;
            
            document.getElementById('sidebar-model-code').innerText = fullCode;
            document.getElementById('sidebar-model-size').innerText = `${series.w} x ${series.l} m`;
            document.getElementById('sidebar-function').innerText = variant.type;
            document.getElementById('sidebar-desc').innerText = variant.thaiName;
        }

        function getCalculatedData() {
            const series = seriesCatalog.find(s => s.id === selectedSeriesId);
            const variant = variants[selectedVariantIndex];
            const area = series.w * series.l;
            
            // Basic Price Logic
            let estimatedPrice = Math.round(area * variant.basePricePerSqm);
            
            // Adjustments
            if (series.id === '2245' && variant.id.includes('S')) estimatedPrice *= 1.2; // Master bath premium

            const priceLow = Math.floor(estimatedPrice / 1000) * 1000;
            const priceHigh = priceLow + 5000;
            
            return {
                ...variant,
                fullCode: `${series.id}${variant.id}`,
                seriesId: series.id,
                w: series.w,
                l: series.l,
                area: area.toFixed(2),
                priceRange: `${(priceLow/1000).toFixed(0)}k - ${(priceHigh/1000).toFixed(0)}k`,
                avgPrice: (priceLow + priceHigh) / 2
            };
        }

        function render() {
            if (viewMode === 'dashboard') {
                renderDashboard();
                return;
            }

            const current = getCalculatedData();

            // 1. Render Top Nav (Variants)
            document.getElementById('nav-container').innerHTML = variants.map((v, index) => {
                const isActive = selectedVariantIndex === index;
                return `
                <button onclick="setVariant(${index})" 
                    class="snap-start min-w-[120px] md:min-w-0 md:flex-1 p-3 rounded-2xl border transition-all duration-300 flex flex-col items-center justify-center gap-1 relative overflow-hidden group
                    ${isActive 
                        ? 'bg-white border-indigo-500 shadow-md ring-2 ring-indigo-100 transform -translate-y-1' 
                        : 'bg-white/60 border-transparent hover:bg-white hover:border-indigo-200 hover:shadow-sm'
                    }">
                    <div class="text-xs font-bold uppercase tracking-wider mb-1 px-2 py-0.5 rounded-full
                        ${isActive ? 'bg-indigo-100 text-indigo-700' : 'bg-gray-100 text-gray-500 group-hover:bg-indigo-50'}">
                        Type ${v.id}
                    </div>
                    <div class="text-sm font-bold ${isActive ? 'text-gray-800' : 'text-gray-400'}">
                        ${v.thaiName.split('(')[1].replace(')','')}
                    </div>
                </button>
                `;
            }).join('');

            // 2. Render Content Area
            const detailCard = document.getElementById('content-area');
            detailCard.className = `min-h-[600px] rounded-3xl p-6 md:p-10 shadow-xl transition-all duration-500 relative overflow-hidden border border-white/50 ${current.bgGradient}`;

            let contentHTML = '';
            if (activeTab === 'specs') contentHTML = renderSpecs(current);
            else if (activeTab === 'plan') contentHTML = renderPlan(current);
            else if (activeTab === '3d') contentHTML = render3D(current);

            detailCard.innerHTML = contentHTML;

            // 3. Render Sidebar List
            document.getElementById('sidebar-list').innerHTML = variants.map((v, index) => {
                const isActive = selectedVariantIndex === index;
                const activeClass = isActive ? 'bg-indigo-50 border-indigo-200 shadow-inner' : 'bg-white border-transparent hover:bg-slate-50';
                return `
                <div onclick="setVariant(${index})" class="p-3 rounded-xl border cursor-pointer transition-all duration-200 flex items-center justify-between ${activeClass}">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${isActive ? 'bg-indigo-500 text-white' : 'bg-slate-100 text-slate-500'}">${v.id}</div>
                        <div class="font-bold text-sm text-slate-700">${v.thaiName}</div>
                    </div>
                </div>`;
            }).join('');
        }

        function renderSpecs(current) {
            const prosList = current.pros.map(pro => `<li class="flex items-start gap-3 text-sm text-gray-700 bg-white/60 p-2 rounded-lg"><div class="text-green-600 mt-0.5">${icons.check}</div><span>${pro}</span></li>`).join('');
            
            return `
                <div class="animate-fade-in relative z-10">
                    <div class="flex flex-col md:flex-row justify-between items-start gap-6 mb-8 border-b border-black/5 pb-6">
                        <div>
                            <div class="flex items-center gap-3 mb-2">
                                <span class="bg-indigo-600 text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm">${current.fullCode}</span>
                                <span class="flex items-center gap-1 text-amber-500 text-xs font-bold bg-white px-2 py-1 rounded-full shadow-sm">${icons.star} ${current.badge}</span>
                            </div>
                            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">${current.thaiName}</h2>
                            <p class="text-gray-600 italic">"${current.slogan}"</p>
                        </div>
                        <div class="bg-white/80 backdrop-blur-md p-4 rounded-2xl shadow-sm border border-white min-w-[200px]">
                            <div class="flex items-center gap-2 text-green-700 font-bold text-2xl">${icons.dollar} ${current.priceRange}</div>
                            <div class="text-xs text-gray-500 mt-1">ประเมินพื้นที่ ${current.area} ตร.ม.</div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="space-y-6">
                             <div class="bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-sm border border-white/60">
                                <h3 class="font-bold text-gray-800 flex items-center gap-2 mb-4 text-lg"><span class="bg-indigo-100 p-1.5 rounded-lg text-indigo-600">${icons.hammer}</span> Standard Specification</h3>
                                <ul class="space-y-3 text-sm">
                                    <li class="grid grid-cols-[80px_1fr] gap-2 border-b border-gray-100 pb-2"><span class="font-semibold text-gray-500">Floor</span> <span class="text-gray-900 font-medium">${current.specs.floor}</span></li>
                                    <li class="grid grid-cols-[80px_1fr] gap-2 border-b border-gray-100 pb-2"><span class="font-semibold text-gray-500">Wall</span> <span class="text-gray-900 font-medium">${current.specs.wall}</span></li>
                                    <li class="grid grid-cols-[80px_1fr] gap-2 border-b border-gray-100 pb-2"><span class="font-semibold text-gray-500">Sanitary</span> <span class="text-gray-900 font-medium">${current.specs.sanitary}</span></li>
                                    <li class="grid grid-cols-[80px_1fr] gap-2 border-b border-gray-100 pb-2"><span class="font-semibold text-gray-500">Features</span> <span class="text-gray-900 font-medium">${current.specs.features}</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="flex flex-col gap-4">
                            <div class="bg-green-100/50 p-5 rounded-2xl border border-green-200/60"><h4 class="font-bold text-green-800 mb-2 text-sm">จุดเด่น (Highlights)</h4><ul class="space-y-1">${prosList}</ul></div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderPlan(current) {
            const scale = 100;
            const wPx = current.w * scale;
            const lPx = current.l * scale;
            
            // Draw elements based on Type
            let elements = '';
            
            // Grid & Wall
            const base = `<defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e2e8f0" stroke-width="1"/></pattern></defs><rect x="0" y="0" width="${wPx}" height="${lPx}" fill="url(#grid)" /><rect x="0" y="0" width="${wPx}" height="${lPx}" fill="none" stroke="#1e293b" stroke-width="4"/>`;
            const door = `<path d="M ${wPx} ${lPx} L ${wPx-60} ${lPx} A 60 60 0 0 1 ${wPx} ${lPx-60}" fill="none" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4"/>`;

            // Function Specifics
            if (current.type === "Shower") {
                // Shower Zone
                elements += `<rect x="5" y="5" width="${wPx-10}" height="80" fill="#e0f2fe" stroke="#38bdf8" stroke-width="2" stroke-dasharray="4"/>`;
                elements += `<text x="${wPx/2}" y="50" text-anchor="middle" fill="#0369a1" font-size="12">Wet Zone</text>`;
                // Toilet
                elements += `<rect x="20" y="${lPx/2}" width="35" height="50" fill="white" stroke="#334155" stroke-width="2" rx="4"/>`;
                // Sink
                elements += `<rect x="5" y="${lPx-50}" width="50" height="35" fill="white" stroke="#334155" stroke-width="2" rx="2"/>`;
            } 
            else if (current.type === "Toilet") {
                // No Shower
                elements += `<rect x="${wPx/2 - 17}" y="20" width="35" height="50" fill="white" stroke="#334155" stroke-width="2" rx="4"/>`; // Toilet Top
                elements += `<rect x="5" y="${lPx/2}" width="50" height="35" fill="white" stroke="#334155" stroke-width="2" rx="2"/>`; // Sink Side
            }
            else if (current.type === "Dry") {
                // Urinal
                elements += `<path d="M ${wPx-40} 30 Q ${wPx-20} 30 ${wPx-20} 50 Q ${wPx-20} 70 ${wPx-40} 70 Z" fill="white" stroke="#334155" stroke-width="2"/>`;
                elements += `<text x="${wPx-50}" y="55" text-anchor="end" fill="#475569" font-size="10">Urinal</text>`;
                // Toilet
                elements += `<rect x="20" y="${lPx/2}" width="35" height="50" fill="white" stroke="#334155" stroke-width="2" rx="4"/>`;
                // Sink
                elements += `<rect x="5" y="${lPx-50}" width="50" height="35" fill="white" stroke="#334155" stroke-width="2" rx="2"/>`;
            }

            return `
                <div class="animate-fade-in h-full flex flex-col items-center justify-center p-4">
                    <div class="bg-white p-4 rounded-xl shadow-lg border border-slate-200">
                        <h3 class="text-center font-bold text-slate-700 mb-2">LAYOUT: ${current.fullCode}</h3>
                        <div class="overflow-auto bg-blueprint p-8 rounded-lg border-2 border-slate-700">
                            <svg width="${wPx}" height="${lPx}" viewBox="0 0 ${wPx} ${lPx}" xmlns="http://www.w3.org/2000/svg" style="background:white;">
                                ${base}
                                ${elements}
                                ${door}
                                <text x="${wPx/2}" y="${lPx-5}" text-anchor="middle" font-size="10" fill="#64748b">${current.w}m</text>
                            </svg>
                        </div>
                    </div>
                </div>`;
        }

        function render3D(current) {
            // Placeholder visuals based on type
            let color = "e2e8f0";
            if(current.id === 'T') color = "fef3c7";
            if(current.id === 'U') color = "d1fae5";
            
            const imgUrl = `https://placehold.co/800x500/${color}/475569?text=3D+View+${current.fullCode}\\n(${current.thaiName})`;
            
            return `
                <div class="animate-fade-in h-full flex flex-col items-center p-4">
                    <div class="w-full max-w-3xl bg-white p-2 rounded-2xl shadow-xl border border-slate-200">
                         <img src="${imgUrl}" alt="3D Render" class="w-full rounded-xl shadow-inner">
                    </div>
                    <p class="mt-4 text-slate-500">จำลองบรรยากาศสำหรับรุ่น ${current.fullCode}</p>
                </div>`;
        }

        function renderDashboard() {
            const contentArea = document.getElementById('content-area');
            contentArea.className = "bg-slate-900 text-white p-6 md:p-10 rounded-3xl min-h-[600px]";
            
            // Compare all variants for the selected series
            const series = seriesCatalog.find(s => s.id === selectedSeriesId);
            const data = variants.map((v, i) => {
                const calculated = Math.round(series.w * series.l * v.basePricePerSqm);
                return { name: v.id, price: calculated, color: v.barColor };
            });
            const maxPrice = Math.max(...data.map(d => d.price)) * 1.2;

            const bars = data.map(d => `
                <div class="flex flex-col items-center gap-2 w-full group">
                    <div class="relative w-full h-48 bg-slate-800/50 rounded-xl flex items-end justify-center px-4 pb-2">
                        <div class="w-full ${d.color} rounded-t-md relative transition-all duration-700" style="height: ${(d.price/maxPrice)*100}%">
                            <span class="absolute -top-6 left-1/2 -translate-x-1/2 text-xs font-bold text-slate-300 opacity-0 group-hover:opacity-100">${(d.price/1000).toFixed(1)}k</span>
                        </div>
                    </div>
                    <div class="text-sm font-bold">${d.name}</div>
                </div>
            `).join('');

            contentArea.innerHTML = `
                <div class="animate-fade-in">
                    <h2 class="text-3xl font-bold mb-2">Analytics: Series ${selectedSeriesId}</h2>
                    <p class="text-slate-400 mb-8">เปรียบเทียบราคาประเมินระหว่าง Type ต่างๆ ในขนาดเดียวกัน</p>
                    <div class="grid grid-cols-5 gap-4 items-end h-64 mb-8">${bars}</div>
                </div>
            `;
        }

        // Start
        init();

    </script>
</body>
</html>
